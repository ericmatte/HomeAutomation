wake_up:
  alias: Wake up
  description: 'Slowly turn on the bedroom lights for about 15 minutes'
  sequence:
    - condition: template
      # entity_id: light.bedroom_light
      value_template: '{{ states.light.bedroom_light.attributes.get("brightness", 0) < 255 }}'
      # below: 255
    - delay:
        milliseconds: 1200
    - alias: Rerun the script
      service: script.wake_up_increment_brightness

wake_up_increment_brightness:
  alias: Increment wake up brightness
  sequence:
    - alias: Bedroom lights brightness increment
      service: light.turn_on
      data:
        entity_id: light.bedroom_light
      data_template:
        brightness: '{{ (states.light.bedroom_light.attributes.get("brightness", 5) + 2) | round | int if (states.light.bedroom_light.attributes.get("brightness", 5) + 2) < 255 else 255 }}'
    - delay:
        # supports seconds, milliseconds, minutes, hours
        seconds: 6 # 7.2sec * 125steps = 900 = 15min
    - alias: Rerun the script
      service: script.wake_up
      
